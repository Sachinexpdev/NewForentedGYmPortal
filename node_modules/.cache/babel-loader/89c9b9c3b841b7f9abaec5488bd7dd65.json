{"ast":null,"code":"import _regeneratorRuntime from \"/home/development/Downloads/Floey_Frontend-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/development/Downloads/Floey_Frontend-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/development/Downloads/Floey_Frontend-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/development/Downloads/Floey_Frontend-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/development/Downloads/Floey_Frontend-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/development/Downloads/Floey_Frontend-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/development/Downloads/Floey_Frontend-master/src/views/base/Permissions/manage_perms.js\";\nimport React from \"react\";\nimport { NavLink } from \"react-router-dom\"; // import WeareGlad from \"../WeareGlad\";\n\nimport $ from \"jquery\";\nimport Cookies from \"universal-cookie\";\nimport BASE_URL from \"src/views/base\"; // import BASE_URL from \"../base\";\n\nimport PermissionsList from \"./PermissionsList\"; // import Iframe from \"react-iframe\";\n// import TopupPermissions from \"../PermissionList/TopupPermissions\";\n// import WithdrawPermissions from \"../PermissionList/WithdrawPermissions\";\n// import SendPermissions from \"../PermissionList/SendPermissions\";\n// import UtilitiesPermissions from \"../PermissionList/UtilitiesPermissions\";\n// import RetailPermissions from \"../PermissionList/RetailPermissions\";\n// import ProfileSection from \"../PermissionList/ProfileSection\";\n// import { toastr } from \"react-redux-toastr\";\n// import timeSensativeAction from \"../sleep_helper\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar cookies = new Cookies();\n\nvar axios = require(\"axios\");\n\nvar WorkFlow = /*#__PURE__*/function (_React$Component) {\n  _inherits(WorkFlow, _React$Component);\n\n  var _super = _createSuper(WorkFlow);\n\n  function WorkFlow(props) {\n    var _this;\n\n    _classCallCheck(this, WorkFlow);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      workflows: [],\n      user_groups: [],\n      section_wise_permissions: [],\n      users: [],\n      user_roles: []\n    };\n    return _this;\n  }\n\n  _createClass(WorkFlow, [{\n    key: \"AddWorkFlow\",\n    value: function AddWorkFlow() {\n      var url = BASE_URL + 'user/roles/permissions/?gym=' + cookies.get('gym_uuid');\n      var section = document.getElementById('section').value;\n      var user_roles = $(\"#roles\").val();\n      var control = 0;\n\n      if (user_roles.includes('Verifier') || user_roles.includes('Authorizer')) {\n        if (!user_roles.includes('Initiator') || !user_roles.includes('Approver')) {\n          control = 1;\n        }\n      }\n\n      if (user_roles.includes('Initiator')) {\n        if (!user_roles.includes('Approver')) {\n          control = 1;\n        }\n      }\n\n      if (control === 1) {\n        alert('Initiator and Approver is Mandatory when you have verifier or authorizer'); // window.location.reload()\n      }\n\n      if (control !== 1) {\n        var config = {\n          url: url,\n          method: \"post\",\n          headers: {\n            Authorization: \"Bearer \",\n            \"Content-Type\": \"application/json\"\n          },\n          data: {\n            base_wallet: cookies.get('wallet_id'),\n            section: section,\n            user_roles: user_roles\n          }\n        };\n        axios(config).then(function (re) {\n          alert(re.data.message);\n          window.location.reload();\n        }).catch(function (err) {// alert(\"Error Please Try Again\");;\n        });\n      }\n    }\n  }, {\n    key: \"AddPerMissionsGroup\",\n    value: function AddPerMissionsGroup() {\n      var url = BASE_URL + 'user/roles/permissions/';\n      var permissions = new Array(); // var section = document.getElementById('perm_grp_section').value;\n\n      var role = document.getElementById('perm_grp_role').value;\n      PermissionsList.map(function (perms) {\n        if ($(\"#\" + perms.id).is(\":checked\")) {\n          permissions.push(perms.id);\n        }\n      });\n      var config = {\n        url: url,\n        method: \"post\",\n        data: {\n          \"permissions\": permissions,\n          \"role\": role\n        }\n      };\n      axios(config).then(function (re) {\n        alert(re.data.message);\n        window.location.reload();\n      }).catch(function (err) {// alert(\"Error Please Try Again\");;\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var url = BASE_URL + 'wallet/section_workflow/?wallet_id=' + cookies.get('wallet_id');\n      var config = {\n        url: url,\n        method: \"get\",\n        headers: {\n          Authorization: \"Bearer \",\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      axios(config).then(function (re) {\n        _this2.setState({\n          workflows: re.data.data\n        });\n      }).catch(function (err) {// alert(\"Error Please Try Again\");;\n      });\n      var config2 = {\n        method: \"get\",\n        url: BASE_URL + 'user/roles/permissions/?gym=' + cookies.get('gym_uuid')\n      };\n      axios(config2).then(function (re) {\n        console.log(re);\n\n        _this2.setState({\n          user_groups: re.data\n        });\n      }).catch(function (err) {// alert(\"Error Please Try Again\");;\n      });\n    }\n  }, {\n    key: \"AddNew\",\n    value: function AddNew() {\n      if ($('#group_name').is(\"select\")) {\n        document.getElementById('grp_div').innerHTML = '';\n        document.getElementById('grp_div').innerHTML = '<input type=\"text\" id=\"group_name\" className=\"form-control\"/>';\n        $(\"#change_btn\").html('Select from list');\n      } else {\n        window.location.reload();\n      }\n    }\n  }, {\n    key: \"RemoveWorkflow\",\n    value: function () {\n      var _RemoveWorkflow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n        var url, x;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // alert('here')\n                url = BASE_URL + 'wallet/work_flow_detail/' + id;\n                _context.next = 3;\n                return axios.delete(url);\n\n              case 3:\n                x = _context.sent;\n\n                if (x.status === 204) {// toastr.success('Workflow Deleted')\n                  // timeSensativeAction(5000);\n                  // window.location = \"/account\";\n                } else {// alert(\"Error\");\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function RemoveWorkflow(_x) {\n        return _RemoveWorkflow.apply(this, arguments);\n      }\n\n      return RemoveWorkflow;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"signup_form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Add WorkFlow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alredy_ac text-center\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"nav nav-tabs buytabs01 row\",\n          role: \"presentation\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#home\",\n            \"aria-controls\": \"home\",\n            role: \"tab\",\n            \"data-toggle\": \"tab\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"btnz2\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fa fa-plus-square\",\n                \"aria-hidden\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 15\n              }, this), \" Add Permission Group\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"tab-content rent-tabs-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            role: \"tabpanel\",\n            class: \"tab-pane\",\n            id: \"home\",\n            children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Group Info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-md-4 col-sm-4 col-xs-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  for: \"sel1\",\n                  children: \"Role Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  id: \"change_btn\",\n                  class: \"click_btn\",\n                  onClick: function onClick() {\n                    return _this3.AddNew();\n                  },\n                  children: \"New Role\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 48\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"grp_div\",\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    id: \"group_name\",\n                    class: \"form-control\",\n                    children: this.state.user_groups.map(function (wf) {\n                      return /*#__PURE__*/_jsxDEV(\"option\", {\n                        children: wf.for_role\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 207,\n                        columnNumber: 25\n                      }, _this3);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 14\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 14\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Add Permissions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"row text-center\",\n              children: PermissionsList.map(function (perm) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-xs-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"container_signup\",\n                    children: [perm.title, /*#__PURE__*/_jsxDEV(\"input\", {\n                      id: perm.id,\n                      value: perm.title,\n                      type: \"checkbox\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 21\n                    }, _this3), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"checkmark\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 21\n                    }, _this3)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 19\n                  }, _this3)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 22\n                }, _this3);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"text-center toppad-20\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                class: \"btn btnz btn-info btn-lg\",\n                onClick: this.AddPerMissionsGroup,\n                children: \"Add Group\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return WorkFlow;\n}(React.Component);\n\nexport default WorkFlow;","map":{"version":3,"sources":["/home/development/Downloads/Floey_Frontend-master/src/views/base/Permissions/manage_perms.js"],"names":["React","NavLink","$","Cookies","BASE_URL","PermissionsList","cookies","axios","require","WorkFlow","props","state","workflows","user_groups","section_wise_permissions","users","user_roles","url","get","section","document","getElementById","value","val","control","includes","alert","config","method","headers","Authorization","data","base_wallet","then","re","message","window","location","reload","catch","err","permissions","Array","role","map","perms","id","is","push","setState","config2","console","log","innerHTML","html","delete","x","status","AddNew","wf","for_role","perm","title","AddPerMissionsGroup","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\n// import WeareGlad from \"../WeareGlad\";\nimport $ from \"jquery\";\nimport Cookies from \"universal-cookie\";\nimport BASE_URL from \"src/views/base\";\n// import BASE_URL from \"../base\";\nimport PermissionsList from \"./PermissionsList\";\n// import Iframe from \"react-iframe\";\n// import TopupPermissions from \"../PermissionList/TopupPermissions\";\n// import WithdrawPermissions from \"../PermissionList/WithdrawPermissions\";\n// import SendPermissions from \"../PermissionList/SendPermissions\";\n// import UtilitiesPermissions from \"../PermissionList/UtilitiesPermissions\";\n// import RetailPermissions from \"../PermissionList/RetailPermissions\";\n// import ProfileSection from \"../PermissionList/ProfileSection\";\n// import { toastr } from \"react-redux-toastr\";\n// import timeSensativeAction from \"../sleep_helper\";\nconst cookies = new Cookies();\nconst axios = require(\"axios\");\n\n\n\nclass WorkFlow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      workflows:[],\n      user_groups:[],\n      section_wise_permissions:[],\n      users: [],\n      user_roles:[]\n    };\n  }\n\n  AddWorkFlow(){\n      var url = BASE_URL+'user/roles/permissions/?gym=' + cookies.get('gym_uuid');\n      \n      var section = document.getElementById('section').value;\n      var user_roles = $(\"#roles\").val();\n      var control=0\n      if (user_roles.includes('Verifier') || user_roles.includes('Authorizer')){\n        if (!user_roles.includes('Initiator') || !user_roles.includes('Approver')){\n          control=1;\n        }\n\n      }\n      if(user_roles.includes('Initiator')){\n        if (!user_roles.includes('Approver')){\n          control=1;\n        }\n      }\n      if (control===1){\n        alert('Initiator and Approver is Mandatory when you have verifier or authorizer')\n        // window.location.reload()\n      }\n      if (control!==1){\n        var config={\n          url:url,\n          method:\"post\",\n          headers: {\n            Authorization: \"Bearer \",\n            \"Content-Type\": \"application/json\",\n          },\n          data:{base_wallet:cookies.get('wallet_id'),section:section,user_roles:user_roles}\n        };\n        axios(config)\n        .then(re=>{\n            alert(re.data.message);\n            window.location.reload();\n        })\n        .catch(err=>{\n            // alert(\"Error Please Try Again\");;\n        })\n      }\n      \n  }\n\n  AddPerMissionsGroup(){\n    var url = BASE_URL+'user/roles/permissions/';\n    \n    var permissions = new Array();\n    // var section = document.getElementById('perm_grp_section').value;\n    var role = document.getElementById('perm_grp_role').value;\n\n    PermissionsList.map(perms=>{\n        if ($(\"#\"+perms.id).is(\":checked\")){\n            permissions.push(perms.id);\n        }\n    })\n    \n  \n    var config={\n      url:url,\n      method:\"post\",\n      data:{\"permissions\":permissions,\"role\":role}\n    };\n    axios(config)\n    .then(re=>{\n        alert(re.data.message);\n        window.location.reload();\n    }).catch(err=>{\n        // alert(\"Error Please Try Again\");;\n    })\n  }\n\n  componentDidMount(){\n    var url = BASE_URL+'wallet/section_workflow/?wallet_id='+cookies.get('wallet_id');\n  \n    var config={\n      url:url,\n      method:\"get\",\n      headers: {\n        Authorization: \"Bearer \",\n        \"Content-Type\": \"application/json\",\n      }\n    };\n    axios(config)\n    .then(re=>{\n        this.setState({workflows:re.data.data});\n    }).catch(err=>{\n        // alert(\"Error Please Try Again\");;\n    })\n\n\n    var config2={\n      method: \"get\",\n      url: BASE_URL+'user/roles/permissions/?gym='+cookies.get('gym_uuid'),\n     \n  }\n  axios(config2)\n    .then(re=>{\n        console.log(re)\n         this.setState({user_groups:re.data});\n    })\n    \n    .catch(err=>{\n      // alert(\"Error Please Try Again\");;\n    })\n\n  }\n\n\n  AddNew(){\n    if($('#group_name').is(\"select\")) {\n      document.getElementById('grp_div').innerHTML='';\n      document.getElementById('grp_div').innerHTML='<input type=\"text\" id=\"group_name\" className=\"form-control\"/>';\n      $(\"#change_btn\").html('Select from list');\n}\nelse{\n  window.location.reload();\n}\n    \n  }\n\n  async RemoveWorkflow(id){\n    // alert('here')\n    var url = BASE_URL+'wallet/work_flow_detail/'+id;\n    const x = await axios.delete(url);\n\n      if (x.status === 204) {\n        // toastr.success('Workflow Deleted')\n        // timeSensativeAction(5000);\n        // window.location = \"/account\";\n      } else {\n        // alert(\"Error\");\n      }\n  }\n\n  render() {\n    return (\n      <div className=\"signup_form\">\n        <h3>Add WorkFlow</h3>\n        <div className=\"alredy_ac text-center\">\n         \n        </div>\n     \n                          \n        \n        {/*         \n        <div class=\"buytabs01 bnk-pay\">\n                        <ul class=\"nav nav-tabs row \" role=\"tablist\"> */}\n\n        <button class=\"nav nav-tabs buytabs01 row\" role=\"presentation\">\n          <a href=\"#home\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\">\n            <span class=\"btnz2\">\n              <i class=\"fa fa-plus-square\" aria-hidden=\"true\"></i> Add Permission Group\n            </span>\n          </a>\n        </button>\n      \n        {/* </ul></div> */}\n        <div class=\"tab-content rent-tabs-content\">\n        <div role=\"tabpanel\" class=\"tab-pane\" id=\"home\">\n        <br/>\n       \n        <div>\n          <h3>Group Info</h3>\n        </div>\n          <div class=\"col-md-4 col-sm-4 col-xs-12\">\n          <div className=\"form-group\">\n            <label for=\"sel1\">Role Name</label><button id=\"change_btn\" class=\"click_btn\" onClick={()=>this.AddNew()}>New Role</button>\n             <div id='grp_div'>\n             {/* <input type=\"text\" id=\"group_name\" className=\"form-control\"/> */}\n             <select id=\"group_name\" class=\"form-control\">\n               {this.state.user_groups.map(wf=>{\n                 return <option>{wf.for_role}</option>\n               })}\n             </select>\n            </div>\n             </div>\n             \n          </div>\n\n         \n         \n          <h4>Add Permissions</h4>\n          <br></br>\n          <div class=\"row text-center\">\n            {PermissionsList.map((perm) => {\n              return <div className=\"col-xs-4\">\n                  <label className=\"container_signup\">\n                    {perm.title}\n                    <input id={perm.id} value={perm.title} type=\"checkbox\" />\n                    <span className=\"checkmark\"></span>\n                  </label>\n                </div>\n              \n             })} \n            \n          </div>\n          <div class=\"text-center toppad-20\">\n                    <button\n                    class=\"btn btnz btn-info btn-lg\"\n                    onClick={this.AddPerMissionsGroup}\n                  >\n                    Add Group\n                  </button>\n                  </div>\n        </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default WorkFlow;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}